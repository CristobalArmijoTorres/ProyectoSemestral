"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3808],{3808:(S,h,r)=>{r.r(h),r.d(h,{AsistenciasPageModule:()=>k});var d=r(177),M=r(4341),o=r(791),f=r(8465),t=r(3953),m=r(1985),g=r(8810),b=r(1397),p=r(9437),P=r(6354),v=r(1626);let F=(()=>{var s;class a{constructor(e){this.http=e,this.apiUrl="http://192.168.84.55:3000"}getAsignaturasByStudentId(e){return this.http.get(`${this.apiUrl}/secciones`).pipe((0,b.Z)(i=>{for(let c of i){const l=c.estudiantes.find(u=>u.estudianteId===e);if(l)return new m.c(u=>{u.next(l.asignaturas),u.complete()})}return new m.c(c=>{c.next([]),c.complete()})}),(0,p.W)(i=>(console.error("Error al obtener asignaturas",i),(0,g.$)(i))))}getAsistenciasByStudentId(e){return this.http.get(`${this.apiUrl}/asistencias`).pipe((0,P.T)(i=>i.filter(c=>c.estudianteId===e)),(0,p.W)(i=>(console.error("Error al obtener asistencias",i),(0,g.$)(i))))}getAllProfesores(){return this.http.get(`${this.apiUrl}/profesores`).pipe((0,p.W)(e=>(console.error("Error al obtener los profesores",e),(0,g.$)(e))))}getUserById(e){return this.http.get(`${this.apiUrl}/${e}`)}getAsistenciasByStudentIdGroupedByAsignatura(e){return this.getAsistenciasByStudentId(e).pipe((0,P.T)(i=>{const c=i.reduce((l,u)=>{const A=u.asignaturaId;return l[A]||(l[A]=[]),l[A].push(u),l},{});return Object.keys(c).map(l=>({asignaturaId:l,asistencias:c[l]}))}))}}return(s=a).\u0275fac=function(e){return new(e||s)(t.KVO(v.Qq))},s.\u0275prov=t.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),a})();function I(s,a){if(1&s){const n=t.RV6();t.j41(0,"ion-accordion")(1,"ion-item",5)(2,"ion-label"),t.EFF(3),t.k0s()(),t.j41(4,"div",6)(5,"h2"),t.EFF(6,"Mi Asistencia"),t.k0s(),t.j41(7,"ion-button",7),t.bIt("click",function(){const i=t.eBV(n).$implicit,c=t.XpG();return t.Njj(c.openModal(i.asistencias))}),t.EFF(8,"Ver M\xe1s"),t.k0s()()()}if(2&s){const n=a.$implicit;t.R7$(3),t.JRh(n.asignaturaId)}}function j(s,a){if(1&s&&(t.j41(0,"ion-item")(1,"ion-label"),t.EFF(2),t.nrm(3,"br"),t.EFF(4),t.k0s()()),2&s){const n=a.$implicit;t.R7$(2),t.SpI(" Fecha: ",n.fecha,""),t.R7$(2),t.SpI(" Estado: ",n.estado?"Presente":"Ausente"," ")}}function y(s,a){if(1&s&&(t.j41(0,"ion-list"),t.DNE(1,j,5,2,"ion-item",3),t.k0s()),2&s){const n=t.XpG(2);t.R7$(),t.Y8G("ngForOf",n.selectedAsistencias)}}function E(s,a){if(1&s){const n=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"Detalles de Asistencia"),t.k0s(),t.j41(4,"ion-buttons",8)(5,"ion-button",9),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.closeModal())}),t.EFF(6,"Cerrar"),t.k0s()()()(),t.j41(7,"ion-content"),t.DNE(8,y,2,1,"ion-list",10),t.k0s()}if(2&s){const n=t.XpG();t.R7$(8),t.Y8G("ngIf",n.selectedAsistencias)}}const R=[{path:"",component:(()=>{var s;class a{constructor(e){this.RegAsistenciaService=e,this.asistenciasAgrupadas=[],this.selectedAsistencias=null,this.showModal=!1,this.studentId="3"}ngOnInit(){this.obtenerAsistenciasAgrupadas()}obtenerAsistenciasAgrupadas(){this.RegAsistenciaService.getAsistenciasByStudentIdGroupedByAsignatura(this.studentId).subscribe({next:e=>{this.asistenciasAgrupadas=e},error:e=>{console.error("Error al obtener asistencias agrupadas:",e)}})}openModal(e){this.selectedAsistencias=e,this.showModal=!0}closeModal(){this.selectedAsistencias=null,this.showModal=!1}}return(s=a).\u0275fac=function(e){return new(e||s)(t.rXU(F))},s.\u0275cmp=t.VBU({type:s,selectors:[["app-asistencias"]],decls:11,vars:2,consts:[["color","primary"],["slot","start"],["defaultHref","menu"],[4,"ngFor","ngForOf"],[3,"didDismiss","isOpen"],["slot","header"],["slot","content",1,"asistencia-content"],["color","warning","expand","block",3,"click"],["slot","end"],[3,"click"],[4,"ngIf"]],template:function(e,i){1&e&&(t.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),t.EFF(3,"Asistencias"),t.k0s(),t.j41(4,"ion-buttons",1),t.nrm(5,"ion-back-button",2),t.k0s()()(),t.j41(6,"ion-content")(7,"ion-accordion-group"),t.DNE(8,I,9,1,"ion-accordion",3),t.k0s(),t.j41(9,"ion-modal",4),t.bIt("didDismiss",function(){return i.closeModal()}),t.DNE(10,E,9,1,"ng-template"),t.k0s()()),2&e&&(t.R7$(8),t.Y8G("ngForOf",i.asistenciasAgrupadas),t.R7$(),t.Y8G("isOpen",i.showModal))},dependencies:[d.Sq,d.bT,o.xk,o.YH,o.Jm,o.QW,o.W9,o.eU,o.uz,o.he,o.nf,o.BC,o.ai,o.Sb,o.el],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: #3b82f6}.asistencia-content[_ngcontent-%COMP%]{text-align:center;padding:16px}h2[_ngcontent-%COMP%]{font-weight:700;color:#333;margin-bottom:8px}ion-button[_ngcontent-%COMP%]{--border-radius: 20px}"]}),a})()}];let $=(()=>{var s;class a{}return(s=a).\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.$C({type:s}),s.\u0275inj=t.G2t({imports:[f.iI.forChild(R),f.iI]}),a})(),k=(()=>{var s;class a{}return(s=a).\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.$C({type:s}),s.\u0275inj=t.G2t({imports:[d.MD,M.YN,o.bv,$]}),a})()}}]);